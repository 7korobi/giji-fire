themes = {
  yelp: {
    N01:    YN01
    N02:    YN02
    VLOVE:  YN03
    LOVE:   YN04
    N05:    YN05
    N06:    YN06
    VGRAVE: YN07 VGSAY
    GRAVE:  YN08 GSAY
    N09:    YN09
    SWEAT:  YP10 YN10
    FOAM:   YP09
    ELSE:   YP08
    BRONZE: YP07
    ALIEN:  YP06
    P05:    YP05
    MUPET:  YP04 MSAY
    BROAD:  YP03 SSAY
    VBROAD: YP02 VSSAY
    LONE:   YP01
    WOLF:   YP00 YN00
  }
  friends: {
    N01:    FN01
    N02:    FN02
    VLOVE:  FN03
    LOVE:   FN04
    N05:    FN05
    N06:    FN06
    VGRAVE: FN07
    GRAVE:  FN08
    N09:    FN09
    SWEAT:  FP10 FN10
    FOAM:   FP09 FSAY
    ELSE:   FP08
    BRONZE: FP07
    ALIEN:  FP06
    P05:    FP05
    MUPET:  FP04
    BROAD:  FP03 AIM
    VBROAD: FP02
    LONE:   FP01 LSAY
    WOLF:   FP00 FN00 WSAY
  }
  whisper: {
    N01:    WN01
    N02:    WN02
    VLOVE:  WN03 PSAY
    LOVE:   WN04 
    N05:    WN05
    N06:    WN06
    VGRAVE: WN07 GAIM
    GRAVE:  WN08
    N09:    WN09
    SWEAT:  WP10 WN10
    FOAM:   WP09
    ELSE:   WP08 ELSE
    BRONZE: WP07
    ALIEN:  WP06 XSAY
    P05:    WP05
    MUPET:  WP04
    BROAD:  WP03
    VBROAD: WP02
    LONE:   WP01
    WOLF:   WP00 WN00
  }
  twitter: {
    N01:    TN01
    N02:    TN02
    VLOVE:  TN03
    LOVE:   TN04
    N05:    TN05
    N06:    TN06
    VGRAVE: TN07
    GRAVE:  TN08 
    N09:    TN09
    SWEAT:  TP10 TN10
    FOAM:   TP09 HSAY
    ELSE:   TP08
    BRONZE: TP07 hide
    ALIEN:  TP06 USAY
    P05:    TP05
    MUPET:  TP04
    BROAD:  TP03
    VBROAD: TP02 TSAY private
    LONE:   TP01
    WOLF:   TP00 TN00 
  }

  announce: {
    N01:    AN01
    N02:    AN02
    VLOVE:  AN03
    LOVE:   AN04
    N05:    AN05
    N06:    AN06
    VGRAVE: AN07
    GRAVE:  AN08 
    N09:    AN09
    SWEAT:  AP10 AN10
    FOAM:   AP09
    ELSE:   AP08
    BRONZE: AP07
    ALIEN:  AP06
    P05:    AP05
    MUPET:  AP04
    BROAD:  AP03
    VBROAD: AP02 public
    LONE:   AP01
    WOLF:   AP00 AN00 
  }
  world: {
    N06:    ADMIN
    N09:    TITLE
    ELSE:   MAKER
  }

  stat: {
    LOVE:   LOVER
    GRAVE:  executed
    SWEAT:  HATER
    ELSE:   PIXI
    BRONZE: GURU
    ALIEN:  EVIL
    BROAD:  HUMAN live juror
    VBROAD: NONE DISH MOB mob visiter grave alive
    LONE:   LONEWOLF
    WOLF:   WOLF suicide victim cursed feared droop
  }
  leave: {
    N06:    DEL_M
    BROAD:  DEL_S
    ALIEN:  suddendead leave
  }
  grass: {
    BROAD:  title-bar
  }
  metal: {
    ELSE:   welcome-links
    ALIEN:  progress
    VBROAD: prologue
  }
  ash: {
    BRONZE: BRONZE footer header
    BROAD:  btns chrblank
    N09:    welcome-btns
  }
}

hues = {
  N01:    19 * 18deg - 2deg
  N02:    18 * 18deg - 1deg
  VLOVE:  17 * 18deg
  LOVE:   16 * 18deg
  N05:    15 * 18deg
  N06:    14 * 18deg
  VGRAVE: 13 * 18deg
  GRAVE:  12 * 18deg
  N09:    11 * 18deg
  SWEAT:  10 * 18deg
  FOAM:    9 * 18deg
  ELSE:    8 * 18deg - 1deg
  BRONZE:  7 * 18deg - 2deg 
  ALIEN:   6 * 18deg - 3deg
  P05:     5 * 18deg - 4deg
  MUPET:   4 * 18deg - 5deg
  BROAD:   3 * 18deg - 6deg
  VBROAD:  2 * 18deg - 5deg
  LONE:    1 * 18deg - 4deg
  WOLF:    0         - 3deg
}


saturates = {
  N01:    100%
  N02:    100%
  VLOVE:  100%
  LOVE:   100%
  N05:    105%
  N06:    110%
  VGRAVE: 110%
  GRAVE:  105%
  N09:    100%
  SWEAT:   90%
  FOAM:    95%
  ELSE:    95%
  BRONZE:  90%
  ALIEN:   95%
  P05:    100%
  MUPET:  100%
  BROAD:  100%
  VBROAD: 100%
  LONE:   100%
  WOLF:   100%
}

lights = {
  N01:    100%
  N02:    100%
  VLOVE:  100%
  LOVE:   100%
  N05:    103%
  N06:    112%
  VGRAVE: 112%
  GRAVE:  100%
  N09:     95%
  SWEAT:   90%
  FOAM:    95%
  ELSE:    93%
  BRONZE:  93%
  ALIEN:   95%
  P05:     97%
  MUPET:   97%
  BROAD:  100%
  VBROAD: 100%
  LONE:   100%
  WOLF:   100%
}


HSLA(key,SS,LL,AA = 1)
  HH = hues[key]
  hsla(HH,SS,LL,AA)

fix(col, SS, LL)
  lighten( saturate( col, SS ), LL )

Bold(a, blur, col)
  b = 0 - a
  text-shadow: a 0 blur col, b 0 blur col

Glowing(a, blur, col)
  b = 0 - a
  text-shadow: 0 0 0.5px col, a a blur col, 0 a blur col, b a blur col, a 0 blur col, b 0 blur col, a b blur col, 0 b blur col, b b blur col

Marker(size, col)
  background: linear-gradient(transparent size, col 0)


palette($themes, $backT)
  for key, $bgTheme in themes[$themes]
    palette_single($bgTheme, $backT, key)

palette_single($bgTheme, $backT, key)

  if snow == $backT
    $bold = HSLA(key,99%,15%,1)
    $bg   = HSLA(key,12%,80%,1)
    $edge = HSLA(key,20%,60%,1)

  if pastel == $backT
    $bold = HSLA(key,40%,15%,1)
    $bg   = HSLA(key,75%,88%,1)
    $edge = HSLA(key,66%,60%,1)


  if white == $backT
    $bold = HSLA(key,99%,15%,1)
    $edge = HSLA(key,20%,40%,1)
    $bg   = HSLA(key,12%,58%,1)

  if calm == $backT
    $bold = HSLA(key,66%,15%,1)
    $edge = HSLA(key,70%,35%,1)
    $bg   = HSLA(key,15%,75%,1)

  if light == $backT
    $bold = HSLA(key,66%,15%,1)
    $edge = HSLA(key,66%,40%,1)
    $bg   = HSLA(key,35%,66%,1)

  if vivid == $backT
    $bold = HSLA(key,44%,15%,1)
    $edge = HSLA(key,60%,40%,1)
    $bg   = HSLA(key,58%,62%,1)


  if metal == $backT
    $bold = HSLA(key,40%,85%,1)
    $edge = HSLA(key,20%,40%,1)
    $bg   = HSLA(key,12%, 9%,1)

  if black == $backT
    $bold = HSLA(key,99%,85%,1)
    $edge = HSLA(key,70%,35%,1)
    $bg   = HSLA(key,15%,15%,1)

  if night == $backT
    $bold = HSLA(key,99%,85%,1)
    $edge = HSLA(key,66%,40%,1)
    $bg   = HSLA(key,35%,15%,1)

  if neon == $backT
    $bold = HSLA(key,66%,85%,1)
    $edge = HSLA(key,60%,40%,1)
    $bg   = HSLA(key,58%,15%,1)


  if ash == $backT
    $bold = HSLA(key,75%,85%,1)
    $bg   = HSLA(key,12%,27%,1)
    $edge = HSLA(key,20%,40%,1)

  if foot == $backT
    $bold = HSLA(key,66%,85%,1)
    $bg   = HSLA(key,35%,35%,1)
    $edge = HSLA(key,66%,40%,1)

  if grass == $backT
    $bold = HSLA(key,66%,85%,1)
    $bg   = HSLA(key,75%,30%,0.5)
    $edge = HSLA(key,66%,40%,0.5)


  $pen    = mix($bg,   $bold, 15%)
  $hide   = mix($bg,   $bold, 40%) + 6deg
  $btn    = mix($bg,   $edge, 75%) - 6deg
  $emboss = mix($edge, $hide, 66%)
  $baloon = $bg
  $bgLow  = fix($bg,   0,  -3) +  6deg
  $bgHi   = fix($bg,   0,   3) +  6deg

  $off    = fix($btn,  5, -20)
  $on     = fix($btn, 20,   0)

  $shade  = fix($edge,40, -25) +  9deg
  $focus  = fix($edge,30, -10)
  $edge   = $edge              -  6deg
  $fine   = fix($edge, 0,   0) + 12deg
  $line   = fix($edge, 0,   0) - 12deg


  $pattern1 = light pastel light snow  vivid light calm white
  $pattern2 = night neon black
  $pattern3 = foot ash metal

  if grass == $backT
    $off   = transparent

  if $backT in $pattern1
    $off   = fix($off, 0,  15)
    $on    = fix($on,  0,  15)
    $shade = fix($edge,0,  35) + 9deg

  if $backT in $pattern3
    $off   = fix($off, 0,   5)
    $on    = fix($on,  0,   5)

  @keyframes {theme}-pulse
    0%   { text-shadow: 2px 0 1px $bgHi, -2px 0 1px $bgHi }
    0%   { text-shadow: 0 2px 1px $bgHi, 0 -2px 1px $bgHi }


  for theme in $bgTheme
    .{theme}.focus
      border-color:   $focus

    .{theme}
      color:            $pen
      background-color: $bg
      border-color:     $edge

      .head:first-line
        color: $bold 
        Glowing(1.5px, 1.0px, $shade)

      &.baloon
        border-color: $baloon

      hr
      hr:after
      hr:before
        border-color: $emboss
        background-color: $bg

      blockquote
        border-color: $edge
      
      // SVG
      rect.move
      .move > rect
        stroke: $focus

      rect.cluster
      .cluster > rect
        stroke: $hide

      text.pen
      text.pen > tspan
        fill: $pen

      .edgePath
        > circle
        > path.fill
          fill: $line
        > path.path
          stroke: $line
        > rect.pen
          fill: $bgHi
        > text.pen
          fill: $pen



    fieldset
      body &.{theme}
      .{theme} &
        color:            $pen
        border-color:     $edge

    input
    select
    textarea
      body &.{theme}
      .{theme} &
        color:            $pen
        background-color: $bgHi
        border-color:     $edge
        :hover
        :focus
          border-color: $focus

    h1
    h2
    h3
    h4
    h5
    h6
      body &.{theme}
      .{theme} &
        color: $bold 

    h1
    h2
      body &.{theme}
      .{theme} &
        Glowing(2.0px, 1.5px, $shade)

    h3
    h4
      body &.{theme}
      .{theme} &
        Glowing(1.5px, 1.0px, $shade)

    h5
    h6
      body &.{theme}
      .{theme} &
        Glowing(1.0px, 0.5px, $shade)

    thead tr
      body &.{theme}
      .{theme} &
        border-color: $focus

    th
      body &.{theme}
      .{theme} &
        color: $bold 
        border-color: $focus

    b
    em
    strong
      body &.{theme}
      .{theme} &
        color: $pen
        text-emphasis-color: $bold 
        text-decoration-color: $bold 

    label
    rt
      body &.{theme}
      .{theme} &
        background-color: $bgHi
        color: $bold 

    .ban
    abbr
    abbr[cite]
      body &.{theme}
      .{theme} &
        background-color: $emboss
        color: $bg

    .name
      body &.{theme}
      .{theme} &
        sup, sub
          background-color: $emboss
          color: $bg

    ins
      body &.{theme}
      .{theme} &
        color: $bold 
        text-emphasis-color: $line
        text-decoration-color: $line

    del
    legend
    .warn
    .name
    .date
      body &.{theme}
      .{theme} &
        color: $hide

    input[type=checkbox]
    input[type=radio]
      body &.{theme}
      .{theme} &
        color: $pen
        Marker(40%, $off)

    [title]
    [data-tooltip]
      body &.{theme}:before
      .{theme} &:before
      body &.{theme}:after
      .{theme} &:after
        text-shadow: none
        color: $pen
        background-color: $bgHi

    .bar
      body &.{theme}
      .{theme} &
        text-shadow: none
        color: $pen
        background-color: $edge

    input[type=submit]
    input[type=button]
    button
    .btn
    [href]
      body &.{theme}
      .{theme} &
        color: $pen
        border-color:     $off
        background-color: $off

        &:hover
        &:focus
          border-color:  $focus

        &.nuxt-link-exact-active
        &.active
        &:checked
          background-color: $on
        &:visited
        &:link
          color: $bold 

    .btn
    [href]
      body &.{theme}
      .{theme} &
        sup, sub
          background-color: $on
          color: $off

        &.nuxt-link-exact-active
        &.active
        &:checked
          sup, sub
            background-color: $off
            color: $on

    s
      body &.{theme}
      .{theme} &
        text-emphasis-color: $line
        text-decoration-color: $line

    kbd
    code
      body &.{theme}
      .{theme} &
        color: $pen
        background-color: $bgHi

    [title]
    [cite]
      body &.{theme}
      .{theme} &
        color: $bold 
        border-color: $on

    input
    select
    button
    textarea
    fieldset
    .btn
    [href]
    [title]
    [cite]
      body .focus &.{theme}
      .{theme}.focus &
        border-color: $focus


